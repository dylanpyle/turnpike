(function(){var t,e,n,r=[].slice;t=function(){function t(t){var e,n;n=t.start,e=t.events,this._state=n,this._events=e}return t.prototype._enterCallbacks=[],t.prototype._exitCallbacks=[],t.prototype.act=function(){var t,e,n,i,o,u,s,a,l,f,c;if(i=arguments[0],t=2<=arguments.length?r.call(arguments,1):[],n=null!=(l=this._events.filter(function(t){return function(e){var n;return e.ev===i&&((n=e.from)===t._state||"*"===n)}}(this))[0])?l.to:void 0,!n||n===this._state)return!1;for(f=this._exitCallbacks.filter(function(t){return function(e){return e.state===t._state}}(this)),o=0,s=f.length;s>o;o++)e=f[o],e.cb.apply(e,t);for(c=this._enterCallbacks.filter(function(){return function(t){return t.state===n}}(this)),u=0,a=c.length;a>u;u++)e=c[u],e.cb.apply(e,t);return this._state=n},t.prototype.onEnter=function(t,e){return this._enterCallbacks.push({state:t,cb:e})},t.prototype.onExit=function(t,e){return this._exitCallbacks.push({state:t,cb:e})},t.prototype.getState=function(){return this._state},t}(),("undefined"!=typeof module&&null!==module?module.exports:void 0)?module.exports=t:("undefined"!=typeof define&&null!==define?define.amd:void 0)?define("turnpike",[],t):(n=this,e=n.Turnpike,n.Turnpike=t,t.noConflict=function(){return n.Turnpike=e})}).call(this);